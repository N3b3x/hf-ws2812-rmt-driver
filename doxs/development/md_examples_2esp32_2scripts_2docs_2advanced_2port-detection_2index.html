<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HF-WS2812 Driver: ESP-IDF Port Detection Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HF-WS2812 Driver<span id="projectnumber">&#160;0.1.0-dev</span>
   </div>
   <div id="projectbrief">HF-WS2812 ESP32 RMT Driver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_examples_2esp32_2scripts_2docs_2advanced_2port-detection_2index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ESP-IDF Port Detection Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md68"></a> This document provides comprehensive documentation for the ESP-IDF port detection system, including cross-platform device identification, troubleshooting, and integration with the development workflow.</p>
<h1><a class="anchor" id="autotoc_md69"></a>
üìã <b>Table of Contents</b></h1>
<h1><a class="anchor" id="autotoc_md70"></a>
üìã <b>Overview</b></h1>
<p>The ESP-IDF port detection system provides intelligent, cross-platform device identification and troubleshooting capabilities. It automatically detects ESP32 devices across different operating systems, validates port accessibility, and provides comprehensive troubleshooting guidance for common connectivity issues.</p>
<h2><a class="anchor" id="autotoc_md71"></a>
<b>Core Features</b></h2>
<ul>
<li><b>Cross-Platform Detection</b>: Automatic ESP32 device identification on Linux, macOS, and Windows (WSL2)</li>
<li><b>Intelligent Troubleshooting</b>: Automated problem detection and resolution guidance</li>
<li><b>Port Validation</b>: Comprehensive connectivity and permission testing</li>
<li><b>Integration Ready</b>: Seamless integration with build and flash systems</li>
<li><b>Performance Optimized</b>: Fast detection with intelligent caching</li>
</ul>
<h2><a class="anchor" id="autotoc_md72"></a>
<b>Key Capabilities</b></h2>
<ul>
<li>Automatic ESP32 device enumeration across platforms</li>
<li>USB device identification and driver status reporting</li>
<li>Port permission verification and automatic resolution</li>
<li>Connection stability testing and validation</li>
<li>Comprehensive troubleshooting and diagnostic information</li>
</ul>
<h1><a class="anchor" id="autotoc_md73"></a>
üèóÔ∏è <b>Architecture and Design</b></h1>
<h2><a class="anchor" id="autotoc_md74"></a>
<b>System Architecture</b></h2>
<div class="fragment"><div class="line">Port Detection ‚Üí Platform Detection ‚Üí Device Enumeration ‚Üí Port Validation ‚Üí Status Reporting</div>
<div class="line">      ‚Üì              ‚Üì                    ‚Üì                ‚Üì                ‚Üì</div>
<div class="line">Cross-Platform   OS Adaptation      USB Device Scan    Connectivity    Troubleshooting</div>
<div class="line">Detection        &amp; Optimization     &amp; Identification   Testing         &amp; Guidance</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md75"></a>
<b>Component Interaction</b></h2>
<ul>
<li><b>Platform Detection</b>: Operating system identification and adaptation</li>
<li><b>Device Enumeration</b>: USB device scanning and ESP32 identification</li>
<li><b>Port Validation</b>: Connectivity testing and permission verification</li>
<li><b>Status Reporting</b>: Comprehensive device and port information</li>
<li><b>Troubleshooting</b>: Problem detection and resolution guidance</li>
</ul>
<h2><a class="anchor" id="autotoc_md76"></a>
<b>Design Principles</b></h2>
<ul>
<li><b>Cross-Platform</b>: Consistent behavior across different operating systems</li>
<li><b>Intelligent Detection</b>: Automatic ESP32 device identification patterns</li>
<li><b>Performance Optimized</b>: Fast detection with minimal system impact</li>
<li><b>User Experience</b>: Clear feedback and actionable troubleshooting guidance</li>
<li><b>Integration Ready</b>: Seamless integration with development workflows</li>
</ul>
<h1><a class="anchor" id="autotoc_md77"></a>
üîå <b>Cross-Platform Detection</b></h1>
<h2><a class="anchor" id="autotoc_md78"></a>
<b>Linux Port Detection</b></h2>
<h3><a class="anchor" id="autotoc_md79"></a>
<b>Device Detection Patterns</b></h3>
<p>The system automatically identifies ESP32 devices on Linux using multiple detection methods:</p>
<div class="fragment"><div class="line">## USB serial device patterns</div>
<div class="line">/dev/ttyUSB0, /dev/ttyUSB1, /dev/ttyACM0, /dev/ttyACM1</div>
<div class="line"> </div>
<div class="line">## ESP32-specific USB identifiers</div>
<div class="line">CP210x: Silicon Labs CP210x USB to UART Bridge (10c4:ea60)</div>
<div class="line">CH340: WCH CH340 USB to Serial (1a86:7523)</div>
<div class="line">FTDI: FTDI FT232R USB UART (0403:6001)</div>
<div class="line">CDC ACM: USB CDC ACM devices (various vendors)</div>
<div class="line"> </div>
<div class="line">## Automatic detection command</div>
<div class="line">./detect_ports.sh --verbose</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md80"></a>
<b>Linux-Specific Features</b></h3>
<div class="fragment"><div class="line">## Kernel message monitoring</div>
<div class="line">dmesg | grep -i usb</div>
<div class="line">dmesg | grep -i tty</div>
<div class="line"> </div>
<div class="line">## USB device enumeration</div>
<div class="line">lsusb -v | grep -i esp</div>
<div class="line">lsusb -v | grep -A5 -B5 &quot;10c4:ea60&quot;</div>
<div class="line"> </div>
<div class="line">## Device file system information</div>
<div class="line">ls -la /sys/class/tty/</div>
<div class="line">ls -la /sys/bus/usb/devices/</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md81"></a>
<b>Permission Management</b></h3>
<div class="fragment"><div class="line">## User group requirements</div>
<div class="line">sudo usermod -a -G dialout $USER</div>
<div class="line">sudo usermod -a -G tty $USER</div>
<div class="line"> </div>
<div class="line">## udev rules for ESP32 devices</div>
<div class="line">sudo nano /etc/udev/rules.d/99-esp32.rules</div>
<div class="line"> </div>
<div class="line">## Example udev rules</div>
<div class="line">SUBSYSTEM==&quot;tty&quot;, ATTRS{idVendor}==&quot;10c4&quot;, ATTRS{idProduct}==&quot;ea60&quot;, MODE=&quot;0666&quot;</div>
<div class="line">SUBSYSTEM==&quot;tty&quot;, ATTRS{idVendor}==&quot;1a86&quot;, ATTRS{idProduct}==&quot;7523&quot;, MODE=&quot;0666&quot;</div>
<div class="line">SUBSYSTEM==&quot;tty&quot;, ATTRS{idVendor}==&quot;0403&quot;, ATTRS{idProduct}==&quot;6001&quot;, MODE=&quot;0666&quot;</div>
<div class="line"> </div>
<div class="line">## Reload udev rules</div>
<div class="line">sudo udevadm control --reload-rules</div>
<div class="line">sudo udevadm trigger</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md82"></a>
<b>macOS Port Detection</b></h2>
<h3><a class="anchor" id="autotoc_md83"></a>
<b>Device Detection Patterns</b></h3>
<p>The system adapts to macOS-specific device patterns and system information:</p>
<div class="fragment"><div class="line">## macOS device patterns</div>
<div class="line">/dev/cu.usbserial-*, /dev/cu.SLAB_USBtoUART*</div>
<div class="line">/dev/cu.usbmodem*, /dev/cu.usbserial*</div>
<div class="line">/dev/cu.wchusbserial*, /dev/cu.FTDI*</div>
<div class="line"> </div>
<div class="line">## System information commands</div>
<div class="line">system_profiler SPUSBDataType | grep -i esp</div>
<div class="line">system_profiler SPUSBDataType | grep -A10 -B5 &quot;CP210x&quot;</div>
<div class="line">system_profiler SPUSBDataType | grep -A10 -B5 &quot;CH340&quot;</div>
<div class="line"> </div>
<div class="line">## Device enumeration</div>
<div class="line">ls /dev/cu.* | grep -E &quot;(usbserial|SLAB|usbmodem|wchusb|FTDI)&quot;</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md84"></a>
<b>macOS-Specific Features</b></h3>
<div class="fragment"><div class="line">## USB device information</div>
<div class="line">ioreg -p IOUSB -l -w 0 | grep -i esp</div>
<div class="line">ioreg -p IOUSB -l -w 0 | grep -A5 -B5 &quot;CP210x&quot;</div>
<div class="line"> </div>
<div class="line">## Port validation</div>
<div class="line">## macOS distinguishes between callout (cu.*) and terminal (tty.*) devices</div>
<div class="line">## Use callout devices for ESP32 communication</div>
<div class="line"> </div>
<div class="line">## Permission handling</div>
<div class="line">## macOS typically doesn&#39;t require special permissions for USB devices</div>
<div class="line">## Check System Preferences &gt; Security &amp; Privacy &gt; Privacy &gt; Full Disk Access</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md85"></a>
<b>macOS Troubleshooting</b></h3>
<div class="fragment"><div class="line">## Check USB device status</div>
<div class="line">system_profiler SPUSBDataType</div>
<div class="line"> </div>
<div class="line">## Verify device enumeration</div>
<div class="line">ls -la /dev/cu.*</div>
<div class="line"> </div>
<div class="line">## Test port accessibility</div>
<div class="line">./detect_ports.sh --test-connection</div>
<div class="line"> </div>
<div class="line">## Check for driver issues</div>
<div class="line">kextstat | grep -i usb</div>
<div class="line">kextstat | grep -i serial</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md86"></a>
<b>Windows (WSL2) Port Detection</b></h2>
<h3><a class="anchor" id="autotoc_md87"></a>
<b>WSL2 Compatibility</b></h3>
<p>The system provides comprehensive WSL2 support for Windows users:</p>
<div class="fragment"><div class="line">## WSL2 port mapping</div>
<div class="line">/dev/ttyS* (COM port equivalents)</div>
<div class="line">/dev/ttyUSB* (USB device mapping)</div>
<div class="line"> </div>
<div class="line">## USB device detection</div>
<div class="line">lsusb for device identification</div>
<div class="line">## Note: lsusb may not work in all WSL2 configurations</div>
<div class="line"> </div>
<div class="line">## Port accessibility testing</div>
<div class="line">./detect_ports.sh --test-connection</div>
<div class="line"> </div>
<div class="line">## Windows COM port mapping</div>
<div class="line">## COM1 ‚Üí /dev/ttyS0</div>
<div class="line">## COM2 ‚Üí /dev/ttyS1</div>
<div class="line">## USB devices ‚Üí /dev/ttyUSB*</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md88"></a>
<b>WSL2-Specific Features</b></h3>
<div class="fragment"><div class="line">## Windows device detection</div>
<div class="line">## Use Windows Device Manager to identify COM ports</div>
<div class="line">## Map COM ports to WSL2 device files</div>
<div class="line"> </div>
<div class="line">## USB device access</div>
<div class="line">## Ensure USB devices are accessible from WSL2</div>
<div class="line">## Check Windows USB device sharing settings</div>
<div class="line"> </div>
<div class="line">## Port validation</div>
<div class="line">./detect_ports.sh --verbose --test-connection</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md89"></a>
<b>WSL2 Troubleshooting</b></h3>
<div class="fragment"><div class="line">## Check WSL2 USB support</div>
<div class="line">lsusb</div>
<div class="line"> </div>
<div class="line">## Verify port accessibility</div>
<div class="line">ls /dev/ttyS*</div>
<div class="line">ls /dev/ttyUSB*</div>
<div class="line"> </div>
<div class="line">## Test basic connectivity</div>
<div class="line">./detect_ports.sh --verbose</div>
<div class="line"> </div>
<div class="line">## Check Windows device sharing</div>
<div class="line">## Ensure USB devices are shared with WSL2</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md90"></a>
üîç <b>Port Validation and Testing</b></h1>
<h2><a class="anchor" id="autotoc_md91"></a>
<b>Connectivity Testing</b></h2>
<h3><a class="anchor" id="autotoc_md92"></a>
<b>Basic Port Testing</b></h3>
<div class="fragment"><div class="line">## Test port connectivity</div>
<div class="line">./detect_ports.sh --test-connection</div>
<div class="line"> </div>
<div class="line">## What it tests</div>
<div class="line">- Port file existence and accessibility</div>
<div class="line">- Read and write permissions</div>
<div class="line">- Basic serial communication capability</div>
<div class="line">- Device responsiveness</div>
<div class="line">- Connection stability</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md93"></a>
<b>Advanced Port Testing</b></h3>
<div class="fragment"><div class="line">## Comprehensive port analysis</div>
<div class="line">./detect_ports.sh --verbose --test-connection</div>
<div class="line"> </div>
<div class="line">## Advanced tests include</div>
<div class="line">- USB device enumeration verification</div>
<div class="line">- Driver status and compatibility</div>
<div class="line">- Permission level validation</div>
<div class="line">- Connection stability testing</div>
<div class="line">- Error condition simulation</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md94"></a>
<b>Test Output Examples</b></h3>
<div class="fragment"><div class="line">## Successful port test</div>
<div class="line">Port: /dev/ttyACM0</div>
<div class="line">  Basic access: ‚úì Available</div>
<div class="line">  Read permissions: ‚úì Readable</div>
<div class="line">  Write permissions: ‚úì Writable</div>
<div class="line">  Serial communication: ‚úì Testable</div>
<div class="line">  Status: READY</div>
<div class="line"> </div>
<div class="line">## Failed port test</div>
<div class="line">Port: /dev/ttyUSB0</div>
<div class="line">  Basic access: ‚úì Available</div>
<div class="line">  Read permissions: ‚úó Permission denied</div>
<div class="line">  Write permissions: ‚úó Permission denied</div>
<div class="line">  Serial communication: ‚úó Not testable</div>
<div class="line">  Status: PERMISSION_ERROR</div>
<div class="line">  Solution: Add user to dialout group</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md95"></a>
<b>Permission Verification</b></h2>
<h3><a class="anchor" id="autotoc_md96"></a>
<b>Permission Level Analysis</b></h3>
<div class="fragment"><div class="line">## Permission checking</div>
<div class="line">ls -la /dev/ttyUSB*</div>
<div class="line">ls -la /dev/ttyACM*</div>
<div class="line"> </div>
<div class="line">## Expected permissions</div>
<div class="line">- Owner: root</div>
<div class="line">- Group: dialout or tty</div>
<div class="line">- Mode: 666 (readable/writable by all)</div>
<div class="line"> </div>
<div class="line">## User group verification</div>
<div class="line">groups $USER</div>
<div class="line">id $USER</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md97"></a>
<b>Permission Resolution</b></h3>
<div class="fragment"><div class="line">## Automatic permission fixing</div>
<div class="line">./detect_ports.sh --fix-permissions</div>
<div class="line"> </div>
<div class="line">## Manual permission resolution</div>
<div class="line">sudo chmod 666 /dev/ttyUSB0</div>
<div class="line">sudo chmod 666 /dev/ttyACM0</div>
<div class="line"> </div>
<div class="line">## User group management</div>
<div class="line">sudo usermod -a -G dialout,tty $USER</div>
<div class="line">newgrp dialout</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md98"></a>
<b>Device Identification</b></h2>
<h3><a class="anchor" id="autotoc_md99"></a>
<b>USB Device Information</b></h3>
<div class="fragment"><div class="line">## Detailed USB device information</div>
<div class="line">./detect_ports.sh --verbose</div>
<div class="line"> </div>
<div class="line">## Information provided</div>
<div class="line">- USB bus and device numbers</div>
<div class="line">- Vendor and product IDs</div>
<div class="line">- Device descriptions</div>
<div class="line">- Driver information</div>
<div class="line">- Connection status</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md100"></a>
<b>Device Type Recognition</b></h3>
<div class="fragment"><div class="line">## ESP32 device patterns</div>
<div class="line">- ESP32: Various USB-to-UART bridges</div>
<div class="line">- ESP32-C3: CP210x, CH340, CDC ACM</div>
<div class="line">- ESP32-C6: CP210x, CH340, CDC ACM</div>
<div class="line">- ESP32-S3: CP210x, CH340, CDC ACM</div>
<div class="line"> </div>
<div class="line">## Device compatibility</div>
<div class="line">- CP210x: Silicon Labs (most reliable)</div>
<div class="line">- CH340: WCH (good compatibility)</div>
<div class="line">- FTDI: FTDI (excellent compatibility)</div>
<div class="line">- CDC ACM: Native USB (modern devices)</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md101"></a>
‚öôÔ∏è <b>Configuration and Customization</b></h1>
<h2><a class="anchor" id="autotoc_md102"></a>
<b>Environment Variables</b></h2>
<h3><a class="anchor" id="autotoc_md103"></a>
<b>Detection Configuration</b></h3>
<div class="fragment"><div class="line">## Port detection configuration</div>
<div class="line">export PORT_DETECTION_VERBOSE=1        # Enable verbose output</div>
<div class="line">export PORT_TEST_TIMEOUT=5             # Set connection test timeout (seconds)</div>
<div class="line">export PORT_SCAN_TIMEOUT=3             # Set port scan timeout (seconds)</div>
<div class="line">export PORT_MAX_RETRIES=3              # Set maximum retry attempts</div>
<div class="line">export PORT_DEBUG=1                    # Enable debug mode</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md104"></a>
<b>Platform-Specific Configuration</b></h3>
<div class="fragment"><div class="line">## Linux configuration</div>
<div class="line">export LINUX_DEVICE_PATTERNS=&quot;/dev/ttyUSB*,/dev/ttyACM*&quot;</div>
<div class="line">export LINUX_GROUPS=&quot;dialout,tty&quot;</div>
<div class="line">export LINUX_UDEV_RULES=&quot;/etc/udev/rules.d/99-esp32.rules&quot;</div>
<div class="line"> </div>
<div class="line">## macOS configuration</div>
<div class="line">export MACOS_DEVICE_PATTERNS=&quot;/dev/cu.usbserial*,/dev/cu.SLAB*&quot;</div>
<div class="line">export MACOS_SYSTEM_PROFILER=1</div>
<div class="line">export MACOS_IOREG=1</div>
<div class="line"> </div>
<div class="line">## WSL2 configuration</div>
<div class="line">export WSL2_PORT_MAPPING=&quot;/dev/ttyS*,/dev/ttyUSB*&quot;</div>
<div class="line">export WSL2_USB_ACCESS=1</div>
<div class="line">export WSL2_COM_MAPPING=1</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md105"></a>
<b>Troubleshooting Configuration</b></h3>
<div class="fragment"><div class="line">## Troubleshooting options</div>
<div class="line">export PORT_AUTO_FIX=1                 # Enable automatic problem resolution</div>
<div class="line">export PORT_VERBOSE_ERRORS=1           # Show detailed error information</div>
<div class="line">export PORT_SUGGEST_SOLUTIONS=1        # Provide solution suggestions</div>
<div class="line">export PORT_LOG_LEVEL=&quot;INFO&quot;           # Set logging level (DEBUG, INFO, WARN, ERROR)</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md106"></a>
<b>Custom Detection Patterns</b></h2>
<h3><a class="anchor" id="autotoc_md107"></a>
<b>User-Defined Device Patterns</b></h3>
<div class="fragment"><div class="line">## Custom device patterns</div>
<div class="line">export CUSTOM_DEVICE_PATTERNS=&quot;/dev/ttyCustom*,/dev/ttyESP*&quot;</div>
<div class="line">export CUSTOM_VENDOR_IDS=&quot;1234:5678,abcd:efgh&quot;</div>
<div class="line">export CUSTOM_PRODUCT_NAMES=&quot;Custom ESP32,My Device&quot;</div>
<div class="line"> </div>
<div class="line">## Pattern format</div>
<div class="line">- Device files: /dev/tty*</div>
<div class="line">- Vendor IDs: xxxx:yyyy (hex format)</div>
<div class="line">- Product names: String patterns (case-insensitive)</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md108"></a>
<b>Custom Validation Rules</b></h3>
<div class="fragment"><div class="line">## Custom validation configuration</div>
<div class="line">export CUSTOM_VALIDATION_RULES=&quot;strict,permissive,auto&quot;</div>
<div class="line">export CUSTOM_TIMEOUT_VALUES=&quot;10,5,3&quot;</div>
<div class="line">export CUSTOM_RETRY_STRATEGIES=&quot;linear,exponential,adaptive&quot;</div>
<div class="line"> </div>
<div class="line">## Validation levels</div>
<div class="line">- strict: Maximum validation, slower detection</div>
<div class="line">- permissive: Basic validation, faster detection</div>
<div class="line">- auto: Automatic level selection based on platform</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md109"></a>
<b>Integration Configuration</b></h2>
<h3><a class="anchor" id="autotoc_md110"></a>
<b>Build System Integration</b></h3>
<div class="fragment"><div class="line">## CMake integration</div>
<div class="line">set(PORT_DETECTION_SCRIPT &quot;${CMAKE_SOURCE_DIR}/scripts/detect_ports.sh&quot;)</div>
<div class="line">set(PORT_DETECTION_ARGS &quot;--verbose&quot; &quot;--test-connection&quot;)</div>
<div class="line"> </div>
<div class="line">## Build target integration</div>
<div class="line">add_custom_target(detect_ports</div>
<div class="line">    COMMAND ${PORT_DETECTION_SCRIPT} ${PORT_DETECTION_ARGS}</div>
<div class="line">    COMMENT &quot;Detecting ESP32 ports&quot;</div>
<div class="line">    DEPENDS ${CMAKE_SOURCE_DIR}/scripts/detect_ports.sh</div>
<div class="line">)</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md111"></a>
<b>CI/CD Integration</b></h3>
<div class="fragment"><div class="line">## GitHub Actions integration</div>
<div class="line">- name: Detect ESP32 Ports</div>
<div class="line">  run: |</div>
<div class="line">    cd /examples/esp32</div>
<div class="line">    ./scripts/detect_ports.sh --verbose --test-connection</div>
<div class="line"> </div>
<div class="line">## GitLab CI integration</div>
<div class="line">detect_ports:</div>
<div class="line">  script:</div>
<div class="line">    - cd /examples/esp32</div>
<div class="line">    - ./scripts/detect_ports.sh --verbose</div>
<div class="line">  artifacts:</div>
<div class="line">    reports:</div>
<div class="line">      junit: port_detection_report.xml</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md112"></a>
üöÄ <b>Usage Examples and Patterns</b></h1>
<h2><a class="anchor" id="autotoc_md113"></a>
<b>Basic Port Detection Workflows</b></h2>
<h3><a class="anchor" id="autotoc_md114"></a>
<b>1. Quick Port Check</b></h3>
<div class="fragment"><div class="line">## Basic port detection</div>
<div class="line">./detect_ports.sh</div>
<div class="line"> </div>
<div class="line">## Expected output</div>
<div class="line">- Available ESP32 devices</div>
<div class="line">- Port accessibility status</div>
<div class="line">- Basic device information</div>
<div class="line">- Quick status summary</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md115"></a>
<b>2. Detailed Port Analysis</b></h3>
<div class="fragment"><div class="line">## Comprehensive port analysis</div>
<div class="line">./detect_ports.sh --verbose</div>
<div class="line"> </div>
<div class="line">## Expected output</div>
<div class="line">- Detailed device information</div>
<div class="line">- USB device details</div>
<div class="line">- Driver status</div>
<div class="line">- Permission information</div>
<div class="line">- Troubleshooting guidance</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md116"></a>
<b>3. Port Connectivity Testing</b></h3>
<div class="fragment"><div class="line">## Test port connectivity</div>
<div class="line">./detect_ports.sh --test-connection</div>
<div class="line"> </div>
<div class="line">## Expected output</div>
<div class="line">- Port accessibility verification</div>
<div class="line">- Connection stability testing</div>
<div class="line">- Error detection and reporting</div>
<div class="line">- Solution suggestions</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md117"></a>
<b>Advanced Port Detection Workflows</b></h2>
<h3><a class="anchor" id="autotoc_md118"></a>
<b>1. Troubleshooting Workflow</b></h3>
<div class="fragment"><div class="line">## Complete troubleshooting process</div>
<div class="line">./detect_ports.sh --verbose --test-connection --fix-permissions</div>
<div class="line"> </div>
<div class="line">## Process steps</div>
<div class="line">1. Port detection and enumeration</div>
<div class="line">2. Device identification and validation</div>
<div class="line">3. Permission verification and fixing</div>
<div class="line">4. Connectivity testing</div>
<div class="line">5. Problem resolution and reporting</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md119"></a>
<b>2. Development Environment Setup</b></h3>
<div class="fragment"><div class="line">## Port detection for development setup</div>
<div class="line">./detect_ports.sh --verbose --test-connection</div>
<div class="line"> </div>
<div class="line">## Integration with setup scripts</div>
<div class="line">./setup_repo.sh</div>
<div class="line">./detect_ports.sh --verify</div>
<div class="line">./flash_app.sh gpio_test Release flash_monitor</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md120"></a>
<b>3. CI/CD Port Validation</b></h3>
<div class="fragment"><div class="line">## Automated port validation</div>
<div class="line">./detect_ports.sh --verbose --test-connection --ci-mode</div>
<div class="line"> </div>
<div class="line">## CI process integration</div>
<div class="line">- Pre-build port validation</div>
<div class="line">- Post-deployment verification</div>
<div class="line">- Automated troubleshooting</div>
<div class="line">- Status reporting</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md121"></a>
<b>Integration Workflows</b></h2>
<h3><a class="anchor" id="autotoc_md122"></a>
<b>1. Build System Integration</b></h3>
<div class="fragment"><div class="line">## CMake integration example</div>
<div class="line">cmake_minimum_required(VERSION 3.16)</div>
<div class="line"> </div>
<div class="line">## Port detection before build</div>
<div class="line">add_custom_target(check_ports</div>
<div class="line">    COMMAND ${CMAKE_SOURCE_DIR}/scripts/detect_ports.sh --verbose</div>
<div class="line">    COMMENT &quot;Checking ESP32 ports before build&quot;</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">## Build dependency on port check</div>
<div class="line">add_custom_target(build_with_port_check</div>
<div class="line">    COMMAND ${CMAKE_COMMAND} --build ${CMAKE_BINARY_DIR}</div>
<div class="line">    DEPENDS check_ports</div>
<div class="line">)</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md123"></a>
<b>2. Flash System Integration</b></h3>
<div class="fragment"><div class="line">## Port detection before flashing</div>
<div class="line">./detect_ports.sh --verbose --test-connection</div>
<div class="line"> </div>
<div class="line">## Flash with port validation</div>
<div class="line">./flash_app.sh gpio_test Release flash_monitor</div>
<div class="line"> </div>
<div class="line">## Integration workflow</div>
<div class="line">1. Port detection and validation</div>
<div class="line">2. Port selection and confirmation</div>
<div class="line">3. Flash operation execution</div>
<div class="line">4. Post-flash verification</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md124"></a>
<b>3. Development Workflow Integration</b></h3>
<div class="fragment"><div class="line">## Complete development workflow</div>
<div class="line">cd /examples/esp32</div>
<div class="line"> </div>
<div class="line">## Environment setup</div>
<div class="line">./setup_repo.sh</div>
<div class="line"> </div>
<div class="line">## Port verification</div>
<div class="line">./detect_ports.sh --verbose --test-connection</div>
<div class="line"> </div>
<div class="line">## Development cycle</div>
<div class="line">./build_app.sh gpio_test Release</div>
<div class="line">./flash_app.sh gpio_test Release flash_monitor</div>
<div class="line">./manage_logs.sh search &quot;ERROR&quot;</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md125"></a>
üîß <b>Troubleshooting and Debugging</b></h1>
<h2><a class="anchor" id="autotoc_md126"></a>
<b>Common Port Issues</b></h2>
<h3><a class="anchor" id="autotoc_md127"></a>
<b>1. No ESP32 Devices Detected</b></h3>
<p><b>Problem</b>: No ESP32 devices found during detection <b>Symptoms</b>: "No ports detected" or "No devices found" messages <b>Solutions</b>: </p><div class="fragment"><div class="line">## Check device connections</div>
<div class="line">./detect_ports.sh --verbose</div>
<div class="line"> </div>
<div class="line">## Verify USB drivers</div>
<div class="line">lsusb | grep -i esp</div>
<div class="line">system_profiler SPUSBDataType | grep -i esp</div>
<div class="line"> </div>
<div class="line">## Check device enumeration</div>
<div class="line">dmesg | grep -i usb</div>
<div class="line">journalctl -f | grep -i usb</div>
<div class="line"> </div>
<div class="line">## Verify USB port functionality</div>
<div class="line">## Try different USB ports</div>
<div class="line">## Check USB cable integrity</div>
<div class="line">## Verify device power status</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md128"></a>
<b>2. Port Permission Issues</b></h3>
<p><b>Problem</b>: Port access denied due to insufficient permissions <b>Symptoms</b>: "Permission denied" or "Access denied" errors <b>Solutions</b>: </p><div class="fragment"><div class="line">## Check user permissions</div>
<div class="line">ls -la /dev/ttyUSB*</div>
<div class="line">groups $USER</div>
<div class="line"> </div>
<div class="line">## Add user to required groups</div>
<div class="line">sudo usermod -a -G dialout,tty $USER</div>
<div class="line">newgrp dialout</div>
<div class="line"> </div>
<div class="line">## Create udev rules (Linux)</div>
<div class="line">sudo nano /etc/udev/rules.d/99-esp32.rules</div>
<div class="line"> </div>
<div class="line">## Reload udev rules</div>
<div class="line">sudo udevadm control --reload-rules</div>
<div class="line">sudo udevadm trigger</div>
<div class="line"> </div>
<div class="line">## Verify permission changes</div>
<div class="line">ls -la /dev/ttyUSB*</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md129"></a>
<b>3. Port Connectivity Issues</b></h3>
<p><b>Problem</b>: Port not accessible or unstable connection <b>Symptoms</b>: "Port not accessible" or connection failures <b>Solutions</b>: </p><div class="fragment"><div class="line">## Test port connectivity</div>
<div class="line">./detect_ports.sh --test-connection</div>
<div class="line"> </div>
<div class="line">## Check port stability</div>
<div class="line">./detect_ports.sh --verbose --test-connection</div>
<div class="line"> </div>
<div class="line">## Verify device mode</div>
<div class="line">## Check for bootloader mode</div>
<div class="line">## Reset device if necessary</div>
<div class="line">## Verify USB power requirements</div>
<div class="line"> </div>
<div class="line">## Check for driver issues</div>
<div class="line">lsmod | grep -i usb</div>
<div class="line">kextstat | grep -i usb</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md130"></a>
<b>Platform-Specific Issues</b></h2>
<h3><a class="anchor" id="autotoc_md131"></a>
<b>Linux Issues</b></h3>
<div class="fragment"><div class="line">## Driver problems</div>
<div class="line">sudo modprobe cp210x</div>
<div class="line">sudo modprobe ch341</div>
<div class="line">sudo modprobe ftdi_sio</div>
<div class="line"> </div>
<div class="line">## Kernel module issues</div>
<div class="line">dmesg | grep -i &quot;module not found&quot;</div>
<div class="line">dmesg | grep -i &quot;driver not found&quot;</div>
<div class="line"> </div>
<div class="line">## udev rule problems</div>
<div class="line">sudo udevadm info -a -n /dev/ttyUSB0</div>
<div class="line">sudo udevadm test /sys/class/tty/ttyUSB0</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md132"></a>
<b>macOS Issues</b></h3>
<div class="fragment"><div class="line">## System Preferences issues</div>
<div class="line">## Check System Preferences &gt; Security &amp; Privacy &gt; Privacy &gt; Full Disk Access</div>
<div class="line">## Add Terminal or your IDE to Full Disk Access</div>
<div class="line"> </div>
<div class="line">## USB device enumeration</div>
<div class="line">system_profiler SPUSBDataType</div>
<div class="line">ioreg -p IOUSB -l -w 0</div>
<div class="line"> </div>
<div class="line">## Driver compatibility</div>
<div class="line">kextstat | grep -i usb</div>
<div class="line">kextstat | grep -i serial</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md133"></a>
<b>WSL2 Issues</b></h3>
<div class="fragment"><div class="line">## USB device access</div>
<div class="line">## Ensure USB devices are shared with WSL2</div>
<div class="line">## Check Windows Device Manager for COM ports</div>
<div class="line"> </div>
<div class="line">## Port mapping</div>
<div class="line">ls /dev/ttyS*</div>
<div class="line">ls /dev/ttyUSB*</div>
<div class="line"> </div>
<div class="line">## Windows device sharing</div>
<div class="line">## Enable USB device sharing in WSL2 settings</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md134"></a>
<b>Debug and Verbose Mode</b></h2>
<h3><a class="anchor" id="autotoc_md135"></a>
<b>Enabling Debug Output</b></h3>
<div class="fragment"><div class="line">## Enable debug mode</div>
<div class="line">export DEBUG=1</div>
<div class="line">export VERBOSE=1</div>
<div class="line">export PORT_DEBUG=1</div>
<div class="line"> </div>
<div class="line">## Run with debug output</div>
<div class="line">./detect_ports.sh --verbose --debug</div>
<div class="line"> </div>
<div class="line">## Debug information available</div>
<div class="line">- Port detection process details</div>
<div class="line">- Device enumeration information</div>
<div class="line">- Permission checking details</div>
<div class="line">- USB device information</div>
<div class="line">- Error context and resolution</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md136"></a>
<b>Debug Information Available</b></h3>
<div class="fragment"><div class="line">## Debug output includes</div>
<div class="line">- Platform detection details</div>
<div class="line">- Device scanning process</div>
<div class="line">- USB enumeration steps</div>
<div class="line">- Permission verification</div>
<div class="line">- Connection testing details</div>
<div class="line">- Error resolution attempts</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md137"></a>
üìö <b>Reference and Examples</b></h1>
<h2><a class="anchor" id="autotoc_md138"></a>
<b>Command Reference</b></h2>
<h3><a class="anchor" id="autotoc_md139"></a>
<b>Port Detection Commands</b></h3>
<div class="fragment"><div class="line">./detect_ports.sh [options]</div>
<div class="line"> </div>
<div class="line">## Basic options:</div>
<div class="line">##   --help, -h           - Show usage information</div>
<div class="line">##   --verbose            - Show detailed device information</div>
<div class="line">##   --test-connection    - Test port connectivity</div>
<div class="line">##   --fix-permissions    - Attempt to fix permission issues</div>
<div class="line"> </div>
<div class="line">## Advanced options:</div>
<div class="line">##   --debug              - Enable debug output</div>
<div class="line">##   --ci-mode            - Optimize for CI/CD environments</div>
<div class="line">##   --timeout &lt;seconds&gt;  - Set operation timeout</div>
<div class="line">##   --retries &lt;count&gt;    - Set retry attempts</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md140"></a>
<b>Environment Variables</b></h3>
<div class="fragment"><div class="line">## Port detection configuration</div>
<div class="line">export PORT_DETECTION_VERBOSE=1        # Enable verbose output</div>
<div class="line">export PORT_TEST_TIMEOUT=5             # Set connection test timeout</div>
<div class="line">export PORT_SCAN_TIMEOUT=3             # Set port scan timeout</div>
<div class="line">export PORT_MAX_RETRIES=3              # Set maximum retry attempts</div>
<div class="line">export PORT_DEBUG=1                    # Enable debug mode</div>
<div class="line">export PORT_AUTO_FIX=1                 # Enable automatic problem resolution</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md141"></a>
<b>Configuration Examples</b></h2>
<h3><a class="anchor" id="autotoc_md142"></a>
<b>Minimal Port Detection Configuration</b></h3>
<div class="fragment"><div class="line">## Basic port detection</div>
<div class="line">./detect_ports.sh</div>
<div class="line"> </div>
<div class="line">## Expected behavior</div>
<div class="line">- Automatic ESP32 device detection</div>
<div class="line">- Basic port information display</div>
<div class="line">- Error reporting for issues</div>
<div class="line">- Quick status summary</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md143"></a>
<b>Advanced Port Detection Configuration</b></h3>
<div class="fragment"><div class="line">## Comprehensive port analysis</div>
<div class="line">./detect_ports.sh --verbose --test-connection --fix-permissions</div>
<div class="line"> </div>
<div class="line">## Expected behavior</div>
<div class="line">- Detailed device information</div>
<div class="line">- Port connectivity testing</div>
<div class="line">- Permission verification and fixing</div>
<div class="line">- Troubleshooting guidance</div>
<div class="line">- Solution suggestions</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md144"></a>
<b>CI/CD Port Detection Configuration</b></h3>
<div class="fragment"><div class="line">## CI-optimized port detection</div>
<div class="line">export CI_MODE=1</div>
<div class="line">./detect_ports.sh --verbose --ci-mode --test-connection</div>
<div class="line"> </div>
<div class="line">## Expected behavior</div>
<div class="line">- Automated port validation</div>
<div class="line">- CI-optimized output format</div>
<div class="line">- Error reporting for CI systems</div>
<div class="line">- Status code for automation</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md145"></a>
<b>Integration Examples</b></h2>
<h3><a class="anchor" id="autotoc_md146"></a>
<b>CMake Integration</b></h3>
<div class="fragment"><div class="line">## CMakeLists.txt port detection integration</div>
<div class="line">cmake_minimum_required(VERSION 3.16)</div>
<div class="line"> </div>
<div class="line">## Port detection target</div>
<div class="line">add_custom_target(detect_ports</div>
<div class="line">    COMMAND ${CMAKE_SOURCE_DIR}/scripts/detect_ports.sh --verbose</div>
<div class="line">    COMMENT &quot;Detecting ESP32 ports&quot;</div>
<div class="line">    DEPENDS ${CMAKE_SOURCE_DIR}/scripts/detect_ports.sh</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">## Build dependency on port detection</div>
<div class="line">add_custom_target(build_with_port_check</div>
<div class="line">    COMMAND ${CMAKE_COMMAND} --build ${CMAKE_BINARY_DIR}</div>
<div class="line">    DEPENDS detect_ports</div>
<div class="line">)</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md147"></a>
<b>CI/CD Integration</b></h3>
<div class="fragment"><div class="line">## GitHub Actions port detection integration</div>
<div class="line">- name: Detect ESP32 Ports</div>
<div class="line">  run: |</div>
<div class="line">    cd /examples/esp32</div>
<div class="line">    ./scripts/detect_ports.sh --verbose --test-connection</div>
<div class="line"> </div>
<div class="line">- name: Validate Port Configuration</div>
<div class="line">  run: |</div>
<div class="line">    cd /examples/esp32</div>
<div class="line">    ./scripts/detect_ports.sh --ci-mode --verbose</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md148"></a>
<b>Automation Scripts</b></h3>
<div class="fragment"><div class="line">#!/bin/bash</div>
<div class="line">## Automated port detection and validation</div>
<div class="line"> </div>
<div class="line">cd /examples/esp32</div>
<div class="line"> </div>
<div class="line">## Detect available ports</div>
<div class="line">echo &quot;Detecting ESP32 ports...&quot;</div>
<div class="line">./detect_ports.sh --verbose</div>
<div class="line"> </div>
<div class="line">## Test port connectivity</div>
<div class="line">echo &quot;Testing port connectivity...&quot;</div>
<div class="line">./detect_ports.sh --test-connection</div>
<div class="line"> </div>
<div class="line">## Fix permission issues if needed</div>
<div class="line">echo &quot;Checking and fixing permissions...&quot;</div>
<div class="line">./detect_ports.sh --fix-permissions</div>
<div class="line"> </div>
<div class="line">## Final validation</div>
<div class="line">echo &quot;Final port validation...&quot;</div>
<div class="line">./detect_ports.sh --verbose --test-connection</div>
<div class="line"> </div>
<div class="line">echo &quot;Port detection complete!&quot;</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md149"></a>
<b>Best Practices</b></h2>
<h3><a class="anchor" id="autotoc_md150"></a>
<b>1. Port Detection</b></h3>
<ul>
<li>Always use verbose mode for troubleshooting</li>
<li>Test port connectivity before operations</li>
<li>Verify permissions and user group membership</li>
<li>Use automatic detection when possible</li>
<li>Regular port health checks</li>
</ul>
<h3><a class="anchor" id="autotoc_md151"></a>
<b>2. Troubleshooting</b></h3>
<ul>
<li>Enable debug mode for detailed information</li>
<li>Use systematic problem resolution approach</li>
<li>Document solutions for future reference</li>
<li>Regular system health checks</li>
<li>Monitor for recurring issues</li>
</ul>
<h3><a class="anchor" id="autotoc_md152"></a>
<b>3. Integration</b></h3>
<ul>
<li>Integrate port detection into build workflows</li>
<li>Use port validation before critical operations</li>
<li>Implement automated port health monitoring</li>
<li>Regular port status reporting</li>
<li>Error handling and recovery</li>
</ul>
<h3><a class="anchor" id="autotoc_md153"></a>
<b>4. Performance</b></h3>
<ul>
<li>Use appropriate detection timeouts</li>
<li>Implement intelligent retry strategies</li>
<li>Cache port information when possible</li>
<li>Optimize for CI/CD environments</li>
<li>Monitor detection performance </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
